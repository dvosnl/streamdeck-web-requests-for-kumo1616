Je werkt in de repository (fork). Doel: uitbreiden van de Stream Deck Web Requests plugin met een twee‑stappen flow: eerst een Destination selecteren, daarna een Source triggeren die een HTTP request uitvoert met placeholders {dest} en {src}.

Achtergrond / probleemcontext
In de originele webinterface van het apparaat kan de gebruiker bovenaan sources kiezen en onderaan destinations. Alles staat overzichtelijk boven/onder elkaar zodat je direct ziet wat geselecteerd is.
Op Stream Deck is dit nu opgelost met folders: elke destination is een folder, en in elke folder staan alle sources met vrijwel dezelfde URL (alleen twee cijfers wijzigen).
Dat is niet efficiënt en niet overzichtelijk.
Gewenst gedrag: onderste helft destinations, bovenste helft sources op één Stream Deck pagina.
Een user kiest eerst een destination → daarna knipperen sources om aan te geven dat er gekozen moet worden → user kiest een source.
Destinations sturen geen HTTP request.
Sources sturen wel de HTTP request, maar moeten de geselecteerde destination in de URL invullen.
De destination blijft geselecteerd (blijvend visueel feedback, niet resetten), zodat de gebruiker altijd kan zien welke destination actief is.
Dit is vooral bedoeld om een matrix of routering in media‑apparatuur snel te kunnen besturen.
Functionele eisen
Nieuwe acties
Voeg twee aparte actions toe in manifest.json:
Destination Select: zet een geselecteerde destination‑ID, stuurt geen HTTP request.
Source Trigger: stuurt het HTTP request, maar gebruikt {dest} + {src} placeholders.
Shared state
Wanneer een Destination wordt gekozen, moet de geselecteerde destination‑ID globaal beschikbaar zijn voor alle Source actions op dat Stream Deck apparaat.
Niet resetten na het triggeren van een Source. De geselecteerde destination blijft actief tot de gebruiker een andere kiest.
Gebruik bij voorkeur global settings of een vergelijkbare SDK‑methode om state te bewaren.
Placeholder templating
Source action krijgt een URL‑veld (bestaand of nieuw) met placeholders.
Vervang {dest} met de laatst geselecteerde destination‑ID.
Vervang {src} met de source‑ID die in de Source action settings is ingesteld.
Laat overige request‑functionaliteit intact (headers, method, body, etc.).
Visuele feedback (knipperen)
Als er een destination is geselecteerd:
Destination actions moeten “selected” lijken (bijv. knipperen/animatie/afwisselende titel/icoon).
Source actions moeten ook knipperen om aan te geven dat er een selectie nodig is.
Na het kiezen van een Source blijft de destination geselecteerd en knipperend.
Implementeer blink met een interval/timer in de plugin; gebruik bij voorkeur setTitle of setImage afwisselend.
Property Inspector
Destination action: minimaal veld voor destination‑ID (bijv. nummer).
Source action: minimaal veld voor source‑ID plus het bestaande URL‑veld.
Indien URL/headers/method/body al bestaan in de plugin, hergebruik ze.
Documentatie
Update README of andere relevante doc met uitleg:
wat Destination/Source actions doen
voorbeeld van URL met placeholders {dest} {src}
hoe selectie werkt (blijft actief)
Geen breaking changes voor bestaande Source functionaliteit behalve de toevoeging van placeholders (oude URL’s zonder placeholders moeten nog werken).
Implementatie richtlijnen
Gebruik bestaande code‑structuur en conventions.
Houd wijzigingen minimaal maar correct.
Let op plugin‑UUID’s: voor nieuwe actions moet je nieuwe UUID’s aanmaken.
Als er al een “request action” is, laat die bestaan als Source action of dupliceer hem.
Bewaar timers per action context en clean up op willDisappear.
Globale state: setGlobalSettings + getGlobalSettings of een in‑memory map gesynchroniseerd met globale settings.
Concrete deliverables
Aangepast manifest.json met 2 actions (Destination en Source).
Plugin runtime code:
handle keyDown voor Destination: set global destination ID.
handle keyDown voor Source: build URL = template replace + execute request.
blink logic voor destination + source wanneer destination selected is.
Property Inspector updates:
Destination: input voor destination‑ID.
Source: input voor source‑ID + URL (bestaand).
README update met gebruiksinstructies en placeholder voorbeeld.
Placeholder voorbeeld
URL template (example):
http://device/api/route?dest={dest}&src={src}

Aanvullende UX details (verplicht)
Destination blijft geselecteerd, knipperend.
Source knipperen zodra er een destination is geselecteerd, zodat de gebruiker ziet dat hij een Source moet kiezen.
Zodra gebruiker een andere destination kiest, update de state en houd blink consistent.
Test/Verificatie
Laad plugin in Stream Deck.
Kies Destination‑button → observeer blink.
Kies Source‑button → request gestuurd met ingevulde {dest} + {src}.
Verander destination → URL gebruikt nieuwe destination.

de streamdeck sdk zit ook in een mapje.